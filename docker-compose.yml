services:
  wallpaper-api:
    build: .
    container_name: wallpaper-api
    restart: unless-stopped
    ports:
      - "${PORT:-8080}:8080"
    environment:
      HOST: 0.0.0.0
      PORT: 8080
      API_TOKEN: ${API_TOKEN:-change-me}
      BASE_URL: ${BASE_URL:-}
      WALLPAPERS_DIR: /data/wallpapers
      SCAN_INTERVAL_SEC: ${SCAN_INTERVAL_SEC:-30}
      DEDUP_ENABLED: ${DEDUP_ENABLED:-true}
      DEDUP_WINDOW: ${DEDUP_WINDOW:-20}
      TOP_K: ${TOP_K:-30}
      UA_TRUST_MODE: ${UA_TRUST_MODE:-auto}
    volumes:
      - ./wallpapers:/data/wallpapers:ro
